@model UserViewModel

<div class="card" style="max-width:40rem;">
    <div class="card-body p-4">
        <h4 div class="card-title">Загрузите вашу фотографию</h4>
        <div class="row mt-4">
            <div class="col-sm-4" id="userAvatar">
                <img src="@Model.ImagePath" style="height:10rem;width:10rem;" />
            </div>
            <div class="col-sm-8">
                <form id="uploadUserPhotoForm" method="post" enctype="multipart/form-data"
                      asp-action="UploadImage" asp-controller="Image">
                    <input type="button" id="uploadUserPhoto" onclick="openFilesFolder()"
                           onmouseout="returnBtnColor('uploadUserPhoto','#f0d037')" 
                           onmouseover="changeBtnColor('uploadUserPhoto','#f0d037')"
                           class="btn btn-warning pl-5 pr-5 mt-1" value="Выбрать фотографию">
                    <input type="file" id="openFolder" hidden />
                </form>
                <div class="row ml-1">
                    <input type="button" class="btn btn-primary none mt-4 mr-4" id="showUserPhoto" value="Загрузить"
                           onclick="showUserPhoto()" 
                           onmouseout="changeBtnColor('showUserPhoto','#1a19b8')" 
                           onmouseover="returnBtnColor('showUserPhoto','#1a19b8')" />
                    <form method="post" asp-controller="User" asp-action="UpdateProfileImage" id="saveUserPhotoForm">
                        <input type="text" name="user.ImagePath" id="sendPhotoToModel" hidden />
                        <input type="text" name="user.Id" value="@Model.Id" hidden />
                        <input type="button" id="saveUserPhotoBtn" value="Сохранить" class="btn btn-success none mt-4 ml-4"
                               onclick="saveUserPhotoAction()"
                               onmouseout="returnBtnColor('saveUserPhotoBtn','#0cb634')"
                               onmouseover="changeBtnColor('saveUserPhotoBtn','#0cb634')" />
                    </form>
                </div>
                <div class="row ml-1">
                    <input type="button" class="btn btn-secondary none mt-3" id="abortPhotoUpdateBtn" value="Отмена"
                           onclick="abortPhotoUpdate()" onmouseout="" onmouseover="" />
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3" style="max-width:40rem;">
    <div class="card-body p-4">
        <h4 div class="card-title">Персональные данные</h4>

        <form method="post" asp-action="UpdateUser" asp-controller="User" id="userUpdateForm">
            <input type="text" name="user.Id" value="@Model.Id" hidden />
            <div class="row mt-4">
                <div class="col-6">
                    <div class="form-group">
                        <label for="userName" class="h6">Имя *</label>
                        <div id="userName" class="currentData">@Model.Name</div>
                        <div>
                            <input type="text" class="profileInput none form-control" id="changeUserName"
                                   name="user.Name" value=@Model.Name aria-describedby="userNameError">
                            <span id="userNameError" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label for="userSurname" class="h6">Фамилия *</label>
                        <div id="userSurname" class="currentData">@Model.Surname</div>
                        <div>
                            <input type="text" class="profileInput none form-control" id="changeUserSurname"
                                   name="user.Surname" value=@Model.Surname aria-describedby="userSurnameError">
                            <span id="userSurnameError" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-12">
                    <div class="form-group">
                        <label for="userMail" class="h6">E-Mail</label>
                        <div id="userMail">@Model.EMail</div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-12">
                    <div class="form-group">
                        <label for="userPhone" class="h6">Телефон</label>
                        @if (Model.Phone == null)
                        {
                            <div id="userPhone" class="currentData">Не указан</div>
                        }
                        @if (Model.Phone != null)
                        {
                            <div id="userPhone" class="currentData">@Model.Phone</div>
                        }
                        <div>
                            <input type="text" class="profileInput none form-control" id="changeUserPhone"
                                   name="user.Phone" value=@Model.Phone aria-describedby="userPhoneError">
                            <span id="userPhoneError" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-6">
                    <div class="form-group">
                        <label for="isUserActive" class="h6">Статус</label>
                        @if (Model.IsActive)
                        {
                            <div id="isUserActive" class=" ">Активен</div>
                        }
                        @if (!Model.IsActive)
                        {
                            <div id="isUserActive" class=" ">Заблокирован</div>
                        }
                    </div>
                </div>
                <div class="col-6">
                    <div class="form-group">
                        <label for="userRole" class="h6">Роль</label>
                        @if (Model.Role == "Admin")
                        {
                            <div id="userRole" class=" ">Администратор</div>
                        }
                        @if (Model.Role == "User")
                        {
                            <div id="userRole" class=" ">Пользователь</div>
                        }
                    </div>
                </div>
            </div>

            <input type="text" id="lastUserEditDate" name="user.LastEditTime" hidden />

            <div class="row mt-1">
                <div class="col-6">
                    <input type="button" id="updateUserProfileBtn"
                           onmouseout="returnBtnColor('updateUserProfileBtn','#f0d037')" 
                           onmouseover="changeBtnColor('updateUserProfileBtn','#f0d037')"
                           class="btn btn-warning pl-4 pr-4" value="Изменить" onclick="updateUserAction()" />
                    <input type="button" id="saveUserProfileChangesBtn" value="Сохранить" class="btn btn-success none pl-4 pr-4" />
                </div>
            </div>
        </form>

    </div>
</div>


<div class="card mt-3 mb-5" style="max-width:40rem;">
    <div class="card-body p-4">
        <h4 div class="card-title">Смена пароля</h4>

        <form method="post" asp-action="ChangePassword" asp-controller="User" id="updateUserPassForm">
            <div class="row mt-3 passString none">
                <div class="col-12">
                    <div class="form-group">
                        <label for="newPassword" class="h6">Новый пароль</label>
                        <input type="password" class="passwordInput form-control" id="newPassword" asp-for="ChangePassword.NewPassword"
                                aria-describedby="newPasswordError" />
                        <span id="newPasswordError" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row mt-3 passString none">
                <div class="col-12">
                    <div class="form-group">
                        <label for="confirmNewPass" class="h6">Повторите пароль</label>
                        <input type="password" class="passwordInput form-control" id="confirmNewPass" asp-for="ChangePassword.ConfirmPassword"
                                aria-describedby="confirmNewPassError" />
                        <span id="confirmNewPassError" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col-6">
                    <input type="button" id="showUpdatePassBtn"
                           onmouseout="returnBtnColor('showUpdatePassBtn','#f0d037')"
                           onmouseover="changeBtnColor('showUpdatePassBtn','#f0d037')"
                           class="btn btn-warning pl-4 pr-4" value="Изменить" onclick="showUpdatePass()" />
                    <input type="button" id="updatePassBtn" value="Сохранить" class="btn btn-success none pl-4 pr-4" />
                    <input type="button" id="abortEditPassword" value="Отмена" class="btn btn-secondary none ml-4 pl-4 pr-4" onclick="abortEditPass()"/>
                </div>
            </div>
        </form>

    </div>
</div>

<script src="~/js/user_profile.js" asp-append-version="true"></script>
